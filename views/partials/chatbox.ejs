<div id="chatBubble" class="chat-bubble">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" height="80" width="80">
        <circle cx="235" cy="250" r="234" style="fill:#567c50"/>
        <path d="M277.19 361.44a15.306 15.306 0 0 0-7.42-1.92H165.64c-24.16 0-39.22-13.1-39.22-36.72V174.84c0-23.62 19.59-42.77 43.75-42.77h130.59c24.16 0 43.75 19.15 43.75 42.77v221.69a1.36 1.36 0 0 1-2.02 1.19l-65.3-36.27Z" style="stroke-width:0;fill:#f7f7f7"/>
        <circle fill="#009700" cx="183.05" cy="251.4" r="11.7" style="fill:#567c50"/>
        <circle fill="#009700" cx="217.68" cy="251.4" r="11.7" style="fill:#567c50"/>
        <circle fill="#009700" cx="252.32" cy="251.4" r="11.7" style="fill:#567c50"/>
        <circle fill="#009700" cx="286.95" cy="251.4" r="11.7" style="fill:#567c50"/>
    </svg>
</div>
<div class="chat-box" id="chatBox">
    <div class="chat-header heading-s">Chat</div>
    <div class="chat-messages body-text" id="chatMessages">
        <span style="display: flex; flex-direction: row-reverse; gap: 8px; align-items: center;">
            <img src="/static/images/infographics-folder/owners/joel-circle.png" alt="" style="height: 32px;">
            <p>Hur kan vi hj√§lpa dig?</p>
        </span>
    </div>
    <div class="chat-input">
        <input type="text" id="messageInput" placeholder="Skriv ett meddelande...">
        <button id="sendButton" class="body-text">Skicka</button>
    </div>
</div>

<script>
    const chatBubble = document.getElementById('chatBubble');
    const chatBox = document.getElementById('chatBox');
    const messageInput = document.getElementById('messageInput');
    const sendButton = document.getElementById('sendButton');
    const chatMessages = document.getElementById('chatMessages');

    chatBubble.addEventListener('click', () => {
        if (chatBox.style.display === 'flex') {
            chatBox.style.display = 'none';
        } else {
            chatBox.style.display = 'flex';
        }
    });

    sendButton.addEventListener('click', sendMessage);
    messageInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });

    function sendMessage() {
        const message = messageInput.value.trim();
        if (message) {
            const messageContainer = document.createElement('div');
            messageContainer.className = 'message-container';

            const svgIcon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svgIcon.setAttribute("viewBox", "0 0 800 800");
            svgIcon.setAttribute("width", "24");
            svgIcon.setAttribute("height", "24");
            svgIcon.setAttribute("aria-hidden", "true");
            svgIcon.className = 'message-icon';

            const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
            path.setAttribute("d", "M597.55 427.07h-395.1c-96.64 0-174.99 78.34-174.99 174.98v169.01c0 16.1 13.06 29.16 29.17 29.16h686.74c16.11 0 29.17-13.06 29.17-29.16V602.05c0-96.64-78.35-174.98-174.99-174.98Zm99.99 298.15H102.46V602.05c0-55.13 44.86-99.98 99.99-99.98h395.1c55.13 0 99.99 44.85 99.99 99.98v123.17ZM400 74.78c31.53 0 61.18 12.28 83.47 34.58 22.3 22.3 34.58 51.94 34.58 83.48s-12.28 61.18-34.58 83.48c-22.3 22.3-51.94 34.58-83.47 34.58s-61.18-12.28-83.48-34.58c-22.3-22.3-34.58-51.94-34.58-83.48s12.28-61.18 34.58-83.48S368.46 74.78 400 74.78m0-75c-106.62 0-193.05 86.43-193.05 193.05S293.38 385.88 400 385.88s193.05-86.43 193.05-193.05S506.62-.22 400-.22Z");
            path.setAttribute("fill", "#567c50");

            svgIcon.appendChild(path);

            const messageElement = document.createElement('p');
            messageElement.textContent = message;
            messageElement.className = 'message-text';

            messageContainer.appendChild(svgIcon);
            messageContainer.appendChild(messageElement);

            chatMessages.appendChild(messageContainer);
            messageInput.value = '';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    }
</script>
